(this.webpackJsonptest_emphasoft=this.webpackJsonptest_emphasoft||[]).push([[0],{26:function(t,e,s){},29:function(t,e,s){},40:function(t,e,s){"use strict";s.r(e);var n=s(3),a=s.n(n),r=s(8),i=s.n(r),o=(s(26),s(27),s(13)),c=s.n(o),u=s(14),l=s(9),d=s(10),m=s(12),h=s(11),b=(s(29),s(43)),j=s(42),p=s(6),f=s(7),O=s(1),g="https://emphasoft-test-assignment.herokuapp.com/api-token-auth/",x={username:"",token:""},v=function(t){Object(m.a)(s,t);var e=Object(h.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={username:"",password:"",errors:{},submitting:!1},t.onChange=function(e){var s=e.target.name,n=e.target.value;t.setState((function(t){var e,a;return a={},Object(p.a)(a,s,n),Object(p.a)(a,"errors",Object(f.a)(Object(f.a)({},t.errors),{},(e={},Object(p.a)(e,s,null),Object(p.a)(e,"base",null),e))),a}))},t.handleBlur=function(){var e=t.validateFields();Object.keys(e).length>0&&t.setState((function(t){return{errors:Object(f.a)(Object(f.a)({},t.errors),e)}}))},t.validateFields=function(){var e={},s=new RegExp("^[\\w.@+-]+$"),n=new RegExp("^(?=.*[A-Z])(?=.*\\d).{8,}$");return""===t.state.username&&(e.username="Cann`t be empty"),""===t.state.password&&(e.password="Cann`t be empty"),t.state.username&&!s.test(t.state.username.toString())&&(e.username="Should contain: A-z and '@ + - _' "),t.state.password&&!n.test(t.state.password.toString())&&(e.password="Should contain uppercase and lowercase letters, number. And must be between 8 and 150 letters"),t.state.username.length>150&&(e.username="Max 150 symbols"),t.state.password.length>150&&(e.password="Max 150 symbols"),e},t.onSubmit=Object(u.a)(c.a.mark((function e(){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){fetch(e,s).then((function(e){if(e.status<400)return t.setState({errors:{base:null}}),e.json();if(400!==e.status)throw e;t.setState({errors:{base:"Enter the correct username / password"}})})).then((function(t){n(t)})).catch((function(t){t.json().then((function(t){a(t)}))}))}))},t.setState({submitting:!0}),e.next=4,s(g,{method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify({username:t.state.username,password:t.state.password})}).then((function(e){e&&(x.username=t.state.username,x.token=e.token),t.props.updateData(x),t.setState({submitting:!1})}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)}))),t.onLogin=function(e){e.preventDefault();var s=t.validateFields();Object.keys(s).length>0?t.setState((function(t){return{errors:Object(f.a)(Object(f.a)({},t.errors),s)}})):t.onSubmit()},t}return Object(d.a)(s,[{key:"render",value:function(){var t=this.state,e=t.username,s=t.password,n=t.errors,a=t.submitting;return Object(O.jsx)("div",{className:"form-login-container ",children:Object(O.jsxs)("form",{className:"form-login ",children:[Object(O.jsx)("h1",{className:"h3 mb-3 font-weight-normal text-center",children:"Authorization"}),Object(O.jsxs)("div",{className:"form-group mt-2",children:[Object(O.jsx)("label",{htmlFor:"username",children:"User"}),Object(O.jsx)("input",{type:"text",className:"form-control mt-1",id:"username",placeholder:"User name",name:"username",value:e,onChange:this.onChange,onBlur:this.handleBlur}),Object(O.jsxs)("div",{className:"invalid-form",children:[" ",n.username," "]})]}),Object(O.jsxs)("div",{className:"form-group mt-2",children:[Object(O.jsx)("label",{htmlFor:"password",children:"Password"}),Object(O.jsx)("input",{type:"password",className:"form-control mt-1",id:"password",placeholder:"Password",name:"password",value:s,onChange:this.onChange,onBlur:this.handleBlur}),Object(O.jsxs)("div",{className:"invalid-form",children:[" ",n.password," "]})]}),Object(O.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary btn-block mt-3 ",onClick:this.onLogin,disabled:a,children:"Sing in "}),Object(O.jsxs)("div",{className:"invalid-form",children:[" ",n.base," "]})]})})}}]),s}(a.a.Component),w=function(t){Object(m.a)(s,t);var e=Object(h.a)(s);function s(){return Object(l.a)(this,s),e.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var t=this.props.item;return Object(O.jsx)("div",{className:"list-group",children:Object(O.jsx)("h1",{className:"list-group-item",children:Object(O.jsxs)("a",{href:"#",className:"list-group-item list-group-item-action flex-column align-items-start active",children:[Object(O.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[Object(O.jsxs)("h5",{className:"mb-1",children:["Username: ",t.username]}),Object(O.jsxs)("small",{children:[" ID: ",t.id]})]}),Object(O.jsxs)("p",{className:"mb-1",children:["  First Name is: ",t.first_name," , Second Name is: ",t.last_name,". ",Object(O.jsx)("br",{})," "]}),Object(O.jsxs)("p",{className:"text-decoration-underline ",children:["   ",!0===t.is_superuser?"And this person is superuser":"Unfortunately this person isn`t superuser"," "]}),Object(O.jsxs)("small",{children:["Account active : ",!0===t.is_active?"YES":"NO"]})]})})})}}]),s}(a.a.Component),y=function(t){Object(m.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(l.a)(this,s),(n=e.call(this,t)).getList=Object(u.a)(c.a.mark((function t(){var e,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.state.userData.token,s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(s,n){fetch(t,e).then((function(t){if(t.status<400)return t.json();throw t})).then((function(t){s(t)})).catch((function(t){t.json().then((function(t){n(t)}))}))}))},t.next=4,s("https://emphasoft-test-assignment.herokuapp.com/api/v1/users/",{method:"GET",headers:{Authorization:"Token ".concat(e)}}).then((function(t){n.setState({usersList:t,showList:!0})}));case 4:t.sent;case 5:case"end":return t.stop()}}),t)}))),n.updateData=function(t){""!==t.username&&""!==t.token&&(n.setState({userData:t,switchAuth:!0}),t&&n.toggleModal())},n.toggleModal=function(){n.setState((function(t){return{showModal:!t.showModal}}))},n.sortListAZ=function(){n.setState({usersList:n.state.usersList.sort((function(t,e){return t.id>e.id?1:-1}))})},n.sortListZA=function(){n.setState({usersList:n.state.usersList.sort((function(t,e){return t.id<e.id?1:-1}))})},n.filterUsername=function(){var t=document.getElementById("filter").value;n.state.usersList.map((function(e){e.username.toLocaleLowerCase().includes(t)?(document.getElementById(e.username).classList.remove("d-none"),document.getElementById(e.username).classList.remove("d-none")):document.getElementById(e.username).classList.add("d-none")}))},n.state={showModal:!1,userData:{},switchAuth:!1,usersList:{},showList:!1},n}return Object(d.a)(s,[{key:"render",value:function(){var t=this.state.usersList;return Object(O.jsxs)("div",{className:"container d-block",children:[Object(O.jsxs)("div",{className:"container d-flex justify-content-center mt-5 ",children:[this.state.switchAuth?Object(O.jsxs)("p",{className:"text-dark",children:["  You are login as : ",this.state.userData.username," "]}):Object(O.jsx)("button",{className:"btn btn-primary btn-block w-50",type:"submit",onClick:this.toggleModal,children:"Login"}),Object(O.jsx)(b.a,{isOpen:this.state.showModal,toggle:this.toggleModal,children:Object(O.jsx)(j.a,{children:Object(O.jsx)(v,{updateData:this.updateData})})})]}),Object(O.jsx)("div",{className:"container d-flex justify-content-center mt-5 mb-3",children:this.state.switchAuth&&Object(O.jsx)("button",{className:"btn btn-primary btn-lg btn-dark ",onClick:this.getList,children:"Get list of users"})}),Object(O.jsxs)("div",{className:"container d-flex  justify-content-around",children:[this.state.showList&&Object(O.jsxs)("button",{className:"btn btn-secondary ",onClick:this.sortListAZ,children:["Sort: ",Object(O.jsx)("br",{}),"Low to High"]}),this.state.showList&&Object(O.jsxs)("button",{className:"btn btn-secondary w-auto",onClick:this.sortListZA,children:["Sort: ",Object(O.jsx)("br",{}),"High to Low"]}),this.state.showList&&Object(O.jsx)("input",{type:"text",className:"form-text",onChange:this.filterUsername,id:"filter",placeholder:"Filter of username"})]}),"  ",Object(O.jsx)("div",{className:"list-group",children:this.state.showList&&t.map((function(t){return Object(O.jsx)("div",{id:t.username,className:"list-group-item",children:Object(O.jsx)(w,{item:t})},t.id)}))})]})}}]),s}(n.Component),N=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,44)).then((function(e){var s=e.getCLS,n=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;s(t),n(t),a(t),r(t),i(t)}))};i.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(y,{})}),document.getElementById("root")),N()}},[[40,1,2]]]);
//# sourceMappingURL=main.f89de010.chunk.js.map